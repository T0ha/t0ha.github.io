---
layout: post
title: 'SPA in Elm: Part 3'
tag:
- web-development
- elm
- material-design
- single-page-applications
- elm-lang
---

<h4>Creating Reliable UI with MDL</h4><figure><img alt="" src="https://cdn-images-1.medium.com/max/437/1*b2WO1UVWDVW4EAW7bgs-Ig.jpeg" /></figure><p><a href="https://medium.com/3-elm-erlang-elixir/spa-in-elm-part-2-1908623429fe">In previous article</a> we’ve created working Single Page Application with 3 screens. But it looked like a “Hello form 80s”, just black text on white background. Let’s fix it now. To be honest, I’m not a great designer, that’s why we’ll use Google’s Material Design Light framework here. It makes web page look like modern mobile application. I have no quick idea about how to design counters themselves, so I live them “as is” for now. You are welcome with suggestions in comments or on Reddit.</p><h4><strong>First steps with MDL</strong></h4><p>To use MDL in our project, we first need to add <a href="http://package.elm-lang.org/packages/debois/elm-mdl">debois/elm-mdl</a> package.</p><pre>elm-package install debois/elm-mdl</pre><p>Then we need to update index.html file and add MDL related stuff. This includes base and icon fonts for MDL and stylesheet for its components.</p><iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/1e1745c12eae8913c0b16f72de2e8a03/href">https://medium.com/media/1e1745c12eae8913c0b16f72de2e8a03/href</a></iframe><p><strong>primary</strong> and <strong>secondary</strong> here are colours for interface. You can choose your colour combination <a href="https://www.getmdl.io/customize/index.html">here</a> or just omit it, if you are ok with default one, which looks fine. So for now we’re going to use default.</p><p><strong>Model</strong></p><p>We need to add field for mdl internal state to our <em>Model</em> and initiate it. It’s nothing special, here is the code.</p><iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/babd15e5cc6e7c750d363bf22a3ba22f/href">https://medium.com/media/babd15e5cc6e7c750d363bf22a3ba22f/href</a></iframe><p><strong>Update</strong></p><p><em>Update</em> is a bit more interesting and needs some more discussion. I haven’t yet found a way to handle <em>Mdl</em> messages without duplicating them in each <em>&lt;screen&gt;.Update</em> module. If anyone here can help with this, you are welcome. Here is my code for this.</p><iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/6729dd2271fd96e7af73bf32978d51f0/href">https://medium.com/media/6729dd2271fd96e7af73bf32978d51f0/href</a></iframe><p><strong>Subscription and initialisation</strong></p><p>MDL <em>Layout</em> functionality needs to add <em>Subscription</em> to our code to work properly. So let’s do.</p><iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/994dbab42cd8937483e88ee966111874/href">https://medium.com/media/994dbab42cd8937483e88ee966111874/href</a></iframe><p><strong>Router</strong></p><p><em>Router</em> doesn’t change dramatically, but we add new field for screen header to <em>Route</em> record and update everything connected. For the purpose of the tutorial we assume screens to have static headers.</p><iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/bd4480d6299b72b9fce09cf85e682635/href">https://medium.com/media/bd4480d6299b72b9fce09cf85e682635/href</a></iframe><p><strong>Screen</strong></p><p>This is completely new module which is used for general screens layout. So we can pay more attention to functionality of each exact screen without duplicating general layout code.</p><iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/ed21d380bf0c703b8c10260e3f633a55/href">https://medium.com/media/ed21d380bf0c703b8c10260e3f633a55/href</a></iframe><p><em>Render</em> type here is an alias for functions that takes <em>Model</em> and returns some <em>Html</em>. They are used very often in <em>Layout</em> so it’s convenient to have an alias.</p><p><em>defaultLayout</em> function is used by most screens to show all this beautiful stuff MDL have, including header, left menu (which is called <em>Drawer</em>) and all the rest is screen’s body. It takes <em>Model</em> and a <em>Render </em>for screen body.</p><p><em>viewHeader</em> function renders screen header for us. Header for screen is taken from new field of <em>Router.Route</em> record.</p><p>We don’t need <em>tabs</em> for this tutorial so we put empty list for their contents.</p><p><strong>View</strong></p><p>If we start out app now, it will compile, and work as before. Nothing changed except code. To see everything in action we need to update <em>View</em>s. I’m going to fix one screen, all the rest is for homework.</p><iframe src="" width="0" height="0" frameborder="0" scrolling="no"><a href="https://medium.com/media/18b4f736507fa65c47d7f9d837dd4e21/href">https://medium.com/media/18b4f736507fa65c47d7f9d837dd4e21/href</a></iframe><p>Firstly ,we change our root <em>View</em> to display MDL screen instead of our previous content.</p><p>We use our <em>Screen.defaultLayout</em> function here, which makes code readable and avoid duplication.</p><p>Next , we refactored <em>First.View</em> to render only main body of the screen without common layout.</p><p>Finaly, we’ve made button look more pleasant. To make the button MDL-style we need to change it from <em>Html.button</em> to <em>Material.Button.render</em>. In <em>Properties</em> list we can add a couple of functions which modifies look and feel of the button and assign messages to events. You can see some examples <a href="https://debois.github.io/elm-mdl/#buttons">here</a>. The most tricky thing here are <em>Index </em>argument<em> </em>which is some strange and not enough documented list of integers. As I’ve discovered it should be uniq for each button. Some information about it can be found on <a href="https://stackoverflow.com/questions/39572118/how-to-handle-elm-mdl-indexes-in-a-big-single-page-application">StackOverflow</a>. I’ll try to describe it in some article later.</p><p>Since it’s just a tutorial, I have no appropriate idea about counters styling, so I leave them as is. You can write me your ideas about it as well.</p><h4>Code</h4><p>All code from this article can be found on <a href="https://github.com/T0ha/elm-screen-router/tree/MDL">GitHub</a>. It has one branch for each part. You are welcome with to fork, use and star it as you like.</p><p><strong>PS</strong></p><p>Dear readers, thank you for your interest and feedback. I was very glad to see so much interest about my <a href="https://medium.com/3-elm-erlang-elixir/spa-in-elm-intro-6f9d1008ddec?source=collection_detail----540b75f3e511-----0----------------">Intro</a>, <a href="https://medium.com/3-elm-erlang-elixir/spa-in-elm-part-1-7bc84287cade">Part 1</a> and <a href="https://medium.com/3-elm-erlang-elixir/spa-in-elm-part-2-1908623429fe">Part 2</a>. If you like this one you are welcome to clap, subscribe and connect me. I’m waiting for new feedback!</p><p>You can contact me on Twitter (<a href="https://twitter.com/T0ha666">@t0ha666</a>), Reddit (<a href="https://www.reddit.com/user/t0ha">/u/t0ha</a>), Telegram (<a href="http://t.me/war1and">t.me/war1and</a>) or Email (<a href="mailto:t0hashvein@gmail.com">t0hashvein@gmail.com</a>).</p><img src="https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=82b628147c5" width="1" height="1" alt=""><hr><p><a href="https://medium.com/3-elm-erlang-elixir/spa-in-elm-part-3-82b628147c5">SPA in Elm: Part 3</a> was originally published in <a href="https://medium.com/3-elm-erlang-elixir">3∑: Elm, Erlang &amp; Elixir</a> on Medium, where people are continuing the conversation by highlighting and responding to this story.</p>
